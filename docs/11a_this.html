<!DOCTYPE html>

<html>
<head>
  <title>11a_this.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="01_variables.html">
                  ./01_variables.js
                </a>
              
                
                <a class="source" href="01_variables.test.html">
                  ./01_variables.test.js
                </a>
              
                
                <a class="source" href="03_objects.html">
                  ./03_objects.js
                </a>
              
                
                <a class="source" href="03_objects.test.html">
                  ./03_objects.test.js
                </a>
              
                
                <a class="source" href="03_types.test.html">
                  ./03_types.test.js
                </a>
              
                
                <a class="source" href="04_object_prototypes.test.html">
                  ./04_object_prototypes.test.js
                </a>
              
                
                <a class="source" href="05_classes.test.html">
                  ./05_classes.test.js
                </a>
              
                
                <a class="source" href="07_functions.html">
                  ./07_functions.js
                </a>
              
                
                <a class="source" href="07_functions.test.html">
                  ./07_functions.test.js
                </a>
              
                
                <a class="source" href="08_callback.exercise_01.html">
                  ./08_callback.exercise_01.js
                </a>
              
                
                <a class="source" href="08_callback.html">
                  ./08_callback.js
                </a>
              
                
                <a class="source" href="08_callback.test.html">
                  ./08_callback.test.js
                </a>
              
                
                <a class="source" href="09_pass_by.html">
                  ./09_pass_by.js
                </a>
              
                
                <a class="source" href="10_closure_and_scoping.test.html">
                  ./10_closure_and_scoping.test.js
                </a>
              
                
                <a class="source" href="11_this.alerternative.html">
                  ./11_this.alerternative.js
                </a>
              
                
                <a class="source" href="11_this.test.html">
                  ./11_this.test.js
                </a>
              
                
                <a class="source" href="11a_this.html">
                  ./11a_this.js
                </a>
              
                
                <a class="source" href="11b_this.html">
                  ./11b_this.js
                </a>
              
                
                <a class="source" href="12_exercise.html">
                  ./12_exercise.js
                </a>
              
                
                <a class="source" href="12_exercise.test.html">
                  ./12_exercise.test.js
                </a>
              
                
                <a class="source" href="12_goodies.html">
                  ./12_goodies.js
                </a>
              
                
                <a class="source" href="13_promises.test.html">
                  ./13_promises.test.js
                </a>
              
                
                <a class="source" href="14_async_await.html">
                  ./14_async_await.js
                </a>
              
                
                <a class="source" href="14_async_await.test.html">
                  ./14_async_await.test.js
                </a>
              
                
                <a class="source" href="server.html">
                  ./server.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>11a_this.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h2 id="this">THIS</h2>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>foo1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo1</span>(<span class="hljs-params">num</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo1: '</span> + num);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>keep track of how many times <code>foo</code> is called</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">this</span>.count++;
}

foo1.count = <span class="hljs-number">0</span>;

<span class="hljs-keyword">var</span> i;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">5</span>) {
    foo1(i);
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>foo: 6
foo: 7
foo: 8
foo: 9</p>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>how many times was <code>foo1</code> called?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">console</span>.log(<span class="hljs-string">`foo1 count <span class="hljs-subst">${foo1.count}</span> \n`</span>); <span class="hljs-comment">// 0 -- WTF?</span>

i = <span class="hljs-number">0</span>;
<span class="hljs-built_in">console</span>.log();
<span class="hljs-comment">/* When the code executes foo.count = 0, indeed it's adding a property count to the function object foo. 
But for the this.count reference inside of the function, this is not in fact pointing at all to that function object, 
and so even though the property names are the same, the root objects are different, and confusion ensues.

which count was I incrementing?
a global created one (which is NaN)
*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>foo2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> data = {
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo2</span>(<span class="hljs-params">num</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo2: '</span> + num);
  <span class="hljs-built_in">console</span>.log(data);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>keep track of how many times <code>foo</code> is called</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  data.count++;
}

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">5</span>) {
    foo2(i);
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>foo: 6
foo: 7
foo: 8
foo: 9</p>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>how many times was <code>foo2</code> called?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">console</span>.log(<span class="hljs-string">`foo2 count <span class="hljs-subst">${data.count}</span>\n`</span>); <span class="hljs-comment">// 4</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>foo3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo3</span>(<span class="hljs-params">num</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo3: '</span> + num);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>keep track of how many times <code>foo</code> is called</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  foo3.count++;
}

foo3.count = <span class="hljs-number">0</span>;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">5</span>) {
    foo3(i);
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>foo: 6
foo: 7
foo: 8
foo: 9</p>

            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>how many times was <code>foo3</code> called?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">console</span>.log(<span class="hljs-string">`foo3 count <span class="hljs-subst">${foo3.count}</span> \n`</span>); <span class="hljs-comment">// 4</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>foo4 EMBRACING THIS!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo4</span>(<span class="hljs-params">num</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo4: '</span> + num);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>keep track of how many times <code>foo</code> is called
Note: <code>this</code> IS actually <code>foo</code> now, based on
how <code>foo</code> is called (see below)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">this</span>.count++;
}

foo4.count = <span class="hljs-number">0</span>;

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">5</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>using <code>call(..)</code>, we ensure the <code>this</code>
points at the function object (<code>foo</code>) itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    foo4.call(foo4, i);
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>foo: 6
foo: 7
foo: 8
foo: 9</p>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>how many times was <code>foo</code> called?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">console</span>.log(<span class="hljs-string">`foo4 count <span class="hljs-subst">${foo4.count}</span> \n\n`</span>); <span class="hljs-comment">// 4</span></pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>this and new object construction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">this</span>.name = name;
}

<span class="hljs-keyword">const</span> george = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">'George'</span>);
<span class="hljs-built_in">console</span>.log(george.name);</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>another example</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Another example bar1, bar2 and bar3\n'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>bar1
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar1</span>(<span class="hljs-params"></span>) </span>{
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`bar1 this.a is: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.a}</span>\n`</span>);
  }, <span class="hljs-number">100</span>);
}

<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>
};

bar1.call(obj); <span class="hljs-comment">// 2</span></pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>bar2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar2</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// lexical capture of `this`</span>
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`bar2 this.a is: <span class="hljs-subst">${self.a}</span>\n`</span>);
  }, <span class="hljs-number">100</span>);
}

<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>
};

bar2.call(obj); <span class="hljs-comment">// 2</span></pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>bar3
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar3</span>(<span class="hljs-params"></span>) </span>{
  setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`bar3 this.a is: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.a}</span>\n`</span>);
  }, <span class="hljs-number">100</span>);
}

<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>
};

<span class="hljs-keyword">const</span> boundedBar3 = bar3.bind(obj); <span class="hljs-comment">// 2</span>
boundedBar3();</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>bar4</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar4</span>(<span class="hljs-params"></span>) </span>{
  setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`bar4 this.a is: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.a}</span>\n`</span>);
  }, <span class="hljs-number">100</span>);
}

<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>
};

bar4.call(obj); <span class="hljs-comment">// 2</span>

<span class="hljs-comment">/*
Called with new? Use the newly constructed object.

Called with call or apply (or bind)? Use the specified object.

Called with a context object owning the call? Use that context object.

Default: undefined in strict mode, global object otherwise.

*/</span>

<span class="hljs-keyword">const</span> candidates = [
  { <span class="hljs-attr">skill</span>: <span class="hljs-string">'JS'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Jane'</span> },
  { <span class="hljs-attr">skill</span>: <span class="hljs-string">'JS'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Mario'</span> },
  { <span class="hljs-attr">skill</span>: <span class="hljs-string">'PHP'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Mel'</span> },
  { <span class="hljs-attr">skill</span>: <span class="hljs-string">'CSS'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Lorna'</span> },
  { <span class="hljs-attr">skill</span>: <span class="hljs-string">'JAVA'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Lorna'</span> }
];

<span class="hljs-keyword">const</span> hasSkill = <span class="hljs-function"><span class="hljs-params">skill</span> =&gt;</span> candidate =&gt; candidate.skill == skill;

<span class="hljs-keyword">let</span> filteredCandidates = candidates.filter(hasSkill(<span class="hljs-string">'JS'</span>));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
